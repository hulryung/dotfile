- defaults:
    shell:
      stdout: true
      stderr: true

- shell:
    - command: |
        # Ensure brew is on PATH
        if [ -d /opt/homebrew ]; then
          eval "$(/opt/homebrew/bin/brew shellenv)"
        elif [ -d /usr/local/Homebrew ]; then
          eval "$(/usr/local/bin/brew shellenv)"
        fi
        for pkg in claude-code codex; do
          if brew list --cask "$pkg" &>/dev/null; then
            echo "$pkg is already installed"
          else
            brew install --cask "$pkg"
          fi
        done
      description: Installing Claude Code and Codex via Homebrew cask
      stdin: true
      stdout: true
      stderr: true
